<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kendaraan | PT ANISA JAYA UTAMA ‚Äî BY ROY</title>
  <link rel="stylesheet" href="styles.css">

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #f4f7f4;
      margin: 0;
      color: #123;
    }

    header {
      background: #0c5d27;
      color: white;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header nav a {
      color: white;
      text-decoration: none;
      margin-left: 16px;
      font-weight: 500;
    }

    .container {
      display: flex;
      margin: 25px auto;
      width: 94%;
      max-width: 1300px;
      gap: 20px;
    }

    /* FORM KENDARAAN */
    .form-card {
      flex: 0 0 330px;
      background: #fff;
      padding: 18px 22px;
      border-radius: 14px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      max-height: 580px;
      overflow-y: auto;
    }

    .form-card h2 {
      margin-top: 0;
      margin-bottom: 15px;
      font-size: 18px;
      color: #0c5d27;
      display: flex;
      align-items: center;
      gap: 6px;
      text-transform: uppercase;
    }

    label {
      font-weight: 600;
      margin-bottom: 4px;
      display: block;
      font-size: 13px;
    }

    .form-card input {
      width: 100%;
      padding: 9px 10px;
      border-radius: 8px;
      border: 1.5px solid #ccc;
      margin-bottom: 12px;
      font-size: 14px;
    }

    /* Tombol */
    .btn-row {
      display: flex;
      gap: 10px;
    }

    .btn-main {
      flex: 1;
      background: #0c5d27;
      color: white;
      border: none;
      padding: 9px 0;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
    }

    .btn-cancel {
      flex: 1;
      background: #c0392b;
      color: white;
      border: none;
      padding: 9px 0;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      opacity: 0.8;
    }
    .btn-cancel:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    /* RIGHT SIDE TABLE */
    .right-card {
      flex: 1;
      background: #fff;
      padding: 18px 22px;
      border-radius: 14px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }

    .right-card h2 {
      margin-top: 0;
      margin-bottom: 14px;
      font-size: 18px;
      color: #0c5d27;
      text-transform: uppercase;
    }

    .search-box {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }

    #searchKendaraan {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: 1.5px solid #ccc;
      font-size: 14px;
    }

    #clearSearch {
      display: none;
      background: #c0392b;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
    }

    .table-wrap {
      max-height: 460px;
      overflow-y: auto;
      border-radius: 8px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    thead th {
      background: #0c5d27;
      color: white;
      padding: 10px;
      text-align: left;
      position: sticky;
      top: 0;
      text-transform: uppercase;
    }

    td {
      padding: 10px;
      border-bottom: 1px solid #eee;
      vertical-align: top;
    }

    tr:hover {
      background: #f9fdf9;
    }
  </style>
</head>

<body onload="initKendaraanPage()">

  <header>
    <div>üöô PT ANISA JAYA UTAMA ‚Äî <small>BY ROY</small></div>
    <nav id="navLinks"></nav>
  </header>

  <main class="container">

    <!-- FORM KENDARAAN -->
    <div class="form-card">
      <h2>üóÇ Form Kendaraan</h2>

      <label>Plat Nomor</label>
      <input type="text" id="plat" placeholder="Contoh: B1234XYZ">

      <label>Letak / Garasi</label>
      <input type="text" id="letak" placeholder="Contoh: Jakarta">

      <label>STNK</label>
      <input type="date" id="stnk">

      <label>KIR</label>
      <input type="date" id="kir">

      <label>Servis Terakhir</label>
      <input type="date" id="servis">

      <label>Pajak 5 Tahunan</label>
      <input type="date" id="pajak">

      <div class="btn-row">
        <button class="btn-main" id="btnTambah">+ Tambah</button>
        <button class="btn-cancel" id="btnBatal" disabled>‚úñ Batal</button>
      </div>
    </div>

    <!-- TABEL KENDARAAN -->
    <div class="right-card">
      <h2>üìã Daftar Kendaraan</h2>

      <div class="search-box">
        <input type="text" id="searchKendaraan" placeholder="üîç Cari kendaraan (Plat / Letak)">
        <button id="clearSearch">‚ùå</button>
      </div>

      <div class="table-wrap">
        <table id="tblKendaraan">
          <thead>
            <tr>
              <th>Plat Nomor</th>
              <th>Letak</th>
              <th>STNK</th>
              <th>KIR</th>
              <th>Servis Terakhir</th>
              <th>Pajak 5 Tahunan</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="7" align="center">Memuat data...</td></tr>
          </tbody>
        </table>
      </div>
    </div>

  </main>

  <script src="main.js?v=9.2"></script>

  <script>
    function initKendaraanPage() {
      const user = getSession();
      if (!user) return location.href = "login.html";

      // NAVIGASI USER
      const nav = document.getElementById("navLinks");
      nav.innerHTML = `
        <a href="dashboard.html">üè† Dashboard</a>
        ${user.role === 'admin' ? `<a href="kendaraan.html">üöó Kendaraan</a>` : ``}
        ${user.role === 'admin' ? `<a href="user.html">üë§ User</a>` : ``}
        <span style="margin-left:15px;">${user.emoji} ${user.nama}</span>
        <a href="#" onclick="logout()">üîí Logout</a>
      `;

      initKendaraan(); // fungsi aslinya dari main.js
    }
  </script>

</body>
</html>
