<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login - PT ANISA JAYA UTAMA</title>

  <!-- Styles global kamu -->
  <link rel="stylesheet" href="styles.css" />

  <style>
    :root{
      --aju-blue:#4fa3df;      /* biru AJU lembut */
      --aju-blue-2:#2e7eb8;
      --ink:#1f2937;
      --muted:#6b7280;
      --card:#ffffff;
      --bg:#f5f7fb;
      --success:#176b2d;
    }
    body{
      background:linear-gradient(180deg,#f7fbff 0%, #eef4fb 60%, #eaf0f8 100%);
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
    }

    /* ===== Card Login ===== */
    .login-card{
      width:min(520px,92vw);
      background:var(--card);
      border-radius:18px;
      padding:28px 28px 24px;
      box-shadow:
        0 10px 30px rgba(31,41,55,.12),
        0 0 0 1px rgba(15,23,42,.03);
      position:relative;
      isolation:isolate;
    }
    .login-card::before{
      content:"";
      position:absolute; inset:-2px;
      border-radius:20px;
      background: radial-gradient(120px 60px at 20% -10%, #ff7aa8 10%, transparent 60%),
                  radial-gradient(120px 60px at 90% -10%, #6cc2ff 10%, transparent 60%);
      filter: blur(24px) opacity(.35);
      z-index:-1;
    }
    .brand{
      display:flex; gap:12px; align-items:center; justify-content:center;
      margin-top:6px; margin-bottom:14px;
      color:var(--ink);
      font-weight:700; font-size:20px;
    }
    .brand .love{filter: drop-shadow(0 1px 0 rgba(0,0,0,.06)); font-size:20px}
    .subtitle{ text-align:center; color:var(--muted); margin-bottom:16px; }

    .field{
      position:relative; margin:10px 0;
    }
    .input{
      width:100%; height:46px;
      border-radius:10px;
      border:1px solid #e5e7eb;
      background:#fafcff;
      padding:10px 44px 10px 14px;
      font-size:15px; outline:0;
      transition: .15s border, .15s box-shadow, .15s background;
    }
    .input:focus{
      border-color:var(--aju-blue);
      box-shadow:0 0 0 3px rgba(79,163,223,.18);
      background:#fff;
    }
    .eye{
      position:absolute; right:10px; top:50%; translate:0 -50%;
      width:32px; height:32px; border:0; border-radius:8px;
      background:#f1f5f9; cursor:pointer; display:grid; place-items:center;
      transition:.15s;
    }
    .eye:hover{ background:#e8eef6 }
    .eye svg{ width:18px; height:18px; opacity:.9 }

    .btn{
      width:100%; height:46px; border-radius:10px; border:0;
      background:linear-gradient(180deg,#1b7a33,#146428);
      color:#fff; font-weight:700; letter-spacing:.2px; cursor:pointer;
      box-shadow:0 6px 18px rgba(23,107,45,.22);
      transition:.15s transform, .15s filter, .15s box-shadow;
      margin-top:8px;
    }
    .btn:hover{ filter:brightness(.98) }
    .btn:active{ transform:translateY(1px) }
    .helper{ text-align:center; margin-top:10px; color:var(--muted); font-size:14px }
    .helper a{ color:var(--aju-blue-2); text-decoration:none }
    .helper a:hover{ text-decoration:underline }

    /* ===== Overlay + Monkey Loader Lucu ===== */
    .overlay{
      position:fixed; inset:0; display:none;
      place-items:center; background:rgba(248,250,253,.92);
      z-index:9999;
      backdrop-filter:saturate(1.1) blur(1px);
    }
    .overlay.show{ display:grid }

    .monkey-wrap{ text-align:center; color:#334155 }
    .monkey{
      width:min(160px,45vw); aspect-ratio:1/1; margin-inline:auto;
      position:relative;
    }
    .monkey svg{ width:100%; height:100% }

    /* animasi gerak mikir: angguk, alis, tangan */
    /* Kepala goyang halus */
    .head { transform-origin:50% 65%; animation: headTilt 1.6s ease-in-out infinite }
    @keyframes headTilt{
      0%,100%{ transform: rotate(0deg) }
      35%{ transform: rotate(-3.5deg) }
      70%{ transform: rotate(3deg) }
    }
    /* Alis naik turun */
    .browL,.browR{ animation: brow 1.6s ease-in-out infinite }
    @keyframes brow{
      0%,100%{ transform: translateY(0) }
      40%{ transform: translateY(-2.5px) }
    }
    /* Tangan garuk kepala */
    .hand{ transform-origin:80% 30%; animation: scratch 1.6s ease-in-out infinite }
    @keyframes scratch{
      0%,100%{ transform: rotate(0) translate(0,0) }
      25%{ transform: rotate(-14deg) translate(-3px, -2px) }
      50%{ transform: rotate(10deg) translate(2px, 1px) }
    }
    .think-text{
      margin-top:12px;
      font-size:15px;
    }

    /* ===== Banner error center (gantikan alert) ===== */
    .toast{
      position:fixed; left:50%; top:calc(50% + 130px); translate:-50% 0;
      background:#fee2e2; color:#991b1b;
      border:1px solid #fecaca; border-radius:12px; padding:10px 14px;
      display:none; z-index:10000; box-shadow:0 8px 24px rgba(0,0,0,.1)
    }
    .toast.show{ display:block; animation: pop .15s ease-out }
    @keyframes pop{ from{ transform:scale(.98) translate(-50%,2px)} to{ transform:scale(1) translate(-50%,0)} }

    /* Small */
    @media (max-width:420px){
      .login-card{ padding:20px }
    }
  </style>
</head>
<body>

  <!-- ===== Card Login ===== -->
  <div class="login-card" id="card">
    <div class="brand">
      <span class="love">üíô</span>
      <span>PT Anisa Jaya Utama</span>
    </div>
    <div class="subtitle">Login Pengguna</div>

    <div class="field">
      <input id="username" class="input" type="text" placeholder="Masukkan username" autocomplete="username" />
    </div>

    <div class="field">
      <input id="password" class="input" type="password" placeholder="Masukkan password" autocomplete="current-password" />
      <button type="button" class="eye" id="togglePass" aria-label="Lihat password" title="Lihat password">
        <svg viewBox="0 0 24 24" fill="none"><path d="M2 12s3.5-6 10-6 10 6 10 6-3.5 6-10 6-10-6-10-6Z" stroke="#0f172a" stroke-width="1.6"/><circle cx="12" cy="12" r="3.2" fill="#0f172a"/></svg>
      </button>
    </div>

    <button id="btnLogin" class="btn" type="button">Masuk</button>

    <div class="helper">Belum punya akun? <a href="register.html">Daftar di sini</a></div>
  </div>

  <!-- ===== Overlay + Monkey (gaya lucu) ===== -->
  <div class="overlay" id="monkeyOverlay" aria-hidden="true">
    <div class="monkey-wrap">
      <div class="monkey" aria-label="Monyet lagi mikir">
        <!-- SVG monyet lucu -->
        <svg viewBox="0 0 200 200">
          <!-- telinga -->
          <g class="head">
            <ellipse cx="58" cy="92" rx="18" ry="14" fill="#b97a56"/>
            <ellipse cx="142" cy="92" rx="18" ry="14" fill="#b97a56"/>
            <!-- kepala -->
            <circle cx="100" cy="100" r="48" fill="#cc9168"/>
            <!-- muka -->
            <ellipse cx="100" cy="115" rx="36" ry="28" fill="#f2d2b6"/>
            <!-- mata -->
            <circle cx="86" cy="105" r="5.5" fill="#262626"/>
            <circle cx="114" cy="105" r="5.5" fill="#262626"/>
            <!-- alis -->
            <rect class="browL" x="76" y="92" width="18" height="3" rx="1.5" fill="#7a4f36"/>
            <rect class="browR" x="106" y="92" width="18" height="3" rx="1.5" fill="#7a4f36"/>
            <!-- hidung -->
            <ellipse cx="100" cy="118" rx="8" ry="6" fill="#7a4f36"/>
            <!-- mulut -->
            <path d="M88 130q12 8 24 0" stroke="#7a4f36" stroke-width="3" fill="none" stroke-linecap="round"/>
          </g>
          <!-- tangan kanan garuk kepala -->
          <g class="hand">
            <path d="M135 130 q16 -18 10 -36" stroke="#cc9168" stroke-width="14" fill="none" stroke-linecap="round"/>
            <circle cx="148" cy="92" r="7" fill="#cc9168"/>
          </g>
        </svg>
      </div>
      <div class="think-text">üôä Monyet lagi mikir‚Ä¶ apakah kamu orang yang benar? ü§î</div>
    </div>
  </div>

  <!-- Toast (ganti alert) untuk error -->
  <div id="toast" class="toast">üôà Username atau password salah! Monyet gak suka üòù</div>

  <!-- Script utama kamu -->
  <script src="main.js"></script>

  <!-- Interaksi halaman login (non-invasif) -->
  <script>
    // ===== helper elemen
    const overlay = document.getElementById('monkeyOverlay');
    const toast   = document.getElementById('toast');
    const btn     = document.getElementById('btnLogin');
    const pass    = document.getElementById('password');
    const eye     = document.getElementById('togglePass');

    // ===== eye toggle
    eye.addEventListener('click', () => {
      const show = pass.type === 'password';
      pass.type = show ? 'text' : 'password';
      eye.title = show ? 'Sembunyikan password' : 'Lihat password';
    });

    // ===== tampilkan/ sembunyikan overlay
    function showMonkey(){ overlay.classList.add('show'); overlay.setAttribute('aria-hidden','false'); }
    function hideMonkey(){ overlay.classList.remove('show'); overlay.setAttribute('aria-hidden','true'); }

    // ===== ganti window.alert menjadi toast center (supaya gak ganggu animasi)
    (function hijackAlert(){
      const native = window.alert;
      window.alert = function(msg){
        try{
          if(String(msg).toLowerCase().includes('username') || String(msg).toLowerCase().includes('password')){
            toast.textContent = 'üôà ' + msg;
            toast.classList.add('show');
            hideMonkey();
            setTimeout(()=> toast.classList.remove('show'), 2800);
            return;
          }
        }catch(e){}
        native(msg);
      }
    })();

    // ===== klik tombol login
    btn.addEventListener('click', () => {
      // tampilkan animasi segera
      showMonkey();

      // jalankan fungsi login() dari main.js
      try { 
        if (typeof login === 'function') login();
        else { hideMonkey(); alert('File main.js belum termuat. Coba reload.'); }
      } catch(e){
        hideMonkey();
        alert('Terjadi kesalahan: ' + e.message);
      }

      // fallback: jika 12 detik belum pindah halaman dan overlay masih tampil, sembunyikan
      setTimeout(() => {
        if (document.visibilityState === 'visible' && overlay.classList.contains('show')) {
          hideMonkey();
        }
      }, 12000);
    });

    // jika halaman berpindah (sukses login), overlay otomatis hilang karena halaman baru diload
    // jika batal/close alert error, overlay disembunyikan di hijackAlert()
  </script>
</body>
</html>
