<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Login - PT ANISA JAYA UTAMA</title>
<link rel="stylesheet" href="styles.css" />

<style>
/* ğŸŒˆ Background & font */
body {
  font-family: "Poppins", sans-serif;
  background: linear-gradient(180deg, #f4f7ff 0%, #e7ecfa 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  overflow: hidden;
}

/* ğŸ’³ Kartu login */
.card {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(12px);
  border-radius: 20px;
  box-shadow: 0 10px 35px rgba(0, 0, 0, 0.08),
              0 0 20px rgba(150, 200, 255, 0.3);
  width: 360px;
  padding: 35px 30px;
  text-align: center;
  animation: fadeIn 0.7s ease;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* â¤ï¸ Logo & judul */
.card h2 {
  font-size: 22px;
  font-weight: 600;
  color: #1a1a1a;
  margin-bottom: 8px;
}
.card h2::before {
  content: "â¤ï¸";
  font-size: 22px;
  margin-right: 6px;
  animation: pulse 1.6s infinite ease-in-out;
}
@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 0.9; }
  50% { transform: scale(1.3); opacity: 1; }
}
.card h3 {
  color: #333;
  font-weight: 500;
  font-size: 15px;
  margin-bottom: 25px;
}

/* ğŸ§¾ Input */
.input-group {
  margin-bottom: 15px;
  position: relative;
}
input {
  width: 100%;
  padding: 12px 14px;
  border: 1.5px solid #d0d7e2;
  border-radius: 10px;
  font-size: 14px;
  outline: none;
  transition: 0.3s;
}
input:focus {
  border-color: #1c75ff;
  box-shadow: 0 0 8px rgba(28, 117, 255, 0.2);
}
.toggle-pass {
  position: absolute;
  right: 12px;
  top: 10px;
  cursor: pointer;
  font-size: 16px;
}

/* ğŸ”˜ Tombol */
#btnLogin {
  width: 100%;
  background: #1b6e2a;
  color: white;
  font-weight: bold;
  border: none;
  border-radius: 10px;
  padding: 12px;
  cursor: pointer;
  font-size: 15px;
  margin-top: 5px;
  transition: 0.3s;
  box-shadow: 0 4px 10px rgba(27, 110, 42, 0.3);
}
#btnLogin:hover {
  background: #145520;
  transform: scale(1.02);
}

/* ğŸ”— Link */
a {
  color: #1b6e2a;
  text-decoration: none;
}
a:hover { text-decoration: underline; }

/* ğŸ’ Animasi Monyet Loading */
#loadingScreen {
  position: fixed;
  inset: 0;
  background: #f6f9ff;
  display: none;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 999;
}
.monkey {
  width: 130px;
  height: 130px;
  animation: bounce 1.4s infinite ease-in-out;
}
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}
.loading-text {
  color: #004aad;
  font-size: 16px;
  margin-top: 20px;
  text-align: center;
}
.error-msg {
  margin-top: 18px;
  background: #ffe6e6;
  border: 1px solid #ffb3b3;
  color: #c62828;
  padding: 10px 15px;
  border-radius: 8px;
  display: none;
  animation: fadeIn 0.4s ease;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>

<script defer src="main.js?v=20251113"></script>
</head>
<body>

<!-- ğŸ’³ FORM LOGIN -->
<div class="card">
  <h2>PT Anisa Jaya Utama</h2>
  <h3>Login Pengguna</h3>

  <div class="input-group">
    <input type="text" id="username" placeholder="Username">
  </div>
  <div class="input-group">
    <input type="password" id="password" placeholder="Password">
    <span class="toggle-pass" id="togglePass">ğŸ‘ï¸</span>
  </div>
  <button id="btnLogin">Masuk</button>
  <p style="margin-top:12px;">Belum punya akun? <a href="register.html">Daftar di sini</a></p>
</div>

<!-- ğŸ’ LAYAR LOADING -->
<div id="loadingScreen">
  <svg class="monkey" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg">
    <circle cx="64" cy="64" r="58" fill="#f5c97d" stroke="#8b5a2b" stroke-width="4"/>
    <circle cx="44" cy="54" r="8" fill="#fff"/>
    <circle cx="84" cy="54" r="8" fill="#fff"/>
    <circle cx="44" cy="54" r="4" fill="#000"/>
    <circle cx="84" cy="54" r="4" fill="#000"/>
    <ellipse cx="64" cy="80" rx="12" ry="8" fill="#8b5a2b"/>
    <circle cx="20" cy="64" r="14" fill="#8b5a2b"/>
    <circle cx="108" cy="64" r="14" fill="#8b5a2b"/>
  </svg>
  <div class="loading-text" id="loadingText">ğŸ’ Monyet lagi mikir... apakah kamu orang yang benar? ğŸ¤”</div>
  <div class="error-msg" id="errorMsg">ğŸ™ˆ Username atau password salah! Monyet gak suka ğŸ˜œ</div>
</div>

<script>
const btn = document.getElementById("btnLogin");
const toggle = document.getElementById("togglePass");
const pass = document.getElementById("password");
const loading = document.getElementById("loadingScreen");
const text = document.getElementById("loadingText");
const errorMsg = document.getElementById("errorMsg");

// ğŸ‘ï¸ Toggle password visibility
toggle.addEventListener("click", () => {
  if (pass.type === "password") {
    pass.type = "text";
    toggle.textContent = "ğŸ™ˆ";
  } else {
    pass.type = "password";
    toggle.textContent = "ğŸ‘ï¸";
  }
});

btn.addEventListener("click", async () => {
  const username = document.getElementById("username").value.trim();
  const password = pass.value.trim();

  if (!username || !password) {
    alert("Isi username dan password!");
    return;
  }

  loading.style.display = "flex";
  text.textContent = "ğŸ’ Monyet lagi mikir... apakah kamu orang yang benar? ğŸ¤”";
  errorMsg.style.display = "none";

  try {
    const res = await api("login", { username, password });
    if (res.success) {
      text.textContent = "âœ… Monyet yakin kamu orang yang benar! ğŸš—ğŸ’¨";
      setTimeout(() => {
        setSession(res.user);
        location.href = "dashboard.html";
      }, 1500);
    } else {
      text.textContent = "ğŸ™ˆ Monyet berhenti mikir...";
      errorMsg.style.display = "block";
      setTimeout(() => (loading.style.display = "none"), 2000);
    }
  } catch (err) {
    text.textContent = "âš ï¸ Server error, coba lagi nanti!";
    setTimeout(() => (loading.style.display = "none"), 2000);
  }
});
</script>

</body>
</html>
