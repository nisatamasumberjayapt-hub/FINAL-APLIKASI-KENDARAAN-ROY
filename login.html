<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login - PT ANISA JAYA UTAMA</title>

  <!-- CSS global kamu -->
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* Hanya styling kecil untuk kartu login (tetap ringan) */
    body {
      background: #f3f6fb;
      min-height: 100vh;
      display: grid;
      place-items: center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .card {
      width: 360px;
      max-width: calc(100vw - 32px);
      background: #fff;
      border-radius: 14px;
      padding: 22px 18px;
      box-shadow: 0 10px 30px rgba(28, 70, 160, 0.10);
      border: 1px solid rgba(28, 70, 160, 0.10);
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: center;
      margin-bottom: 10px;
      color: #1c46a0;
      font-weight: 700;
    }
    .brand .dot {
      width: 36px; height: 36px;
      border-radius: 50%;
      display: grid;place-items: center;
      background: #e9f2ff;
      border: 1px solid #cfe3ff;
      font-size: 18px;
    }
    h2 {
      text-align: center;
      margin: 6px 0 14px;
      font-size: 18px;
      color: #2b2f3a;
    }
    .field {
      margin: 10px 0;
      position: relative;
    }
    .field input {
      width: 100%;
      height: 44px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #dbe3f0;
      outline: none;
      font-size: 14px;
      transition: 0.15s;
      background: #fff;
    }
    .field input:focus {
      border-color: #1c46a0;
      box-shadow: 0 0 0 3px rgba(28, 70, 160, 0.12);
    }
    .toggle {
      position: absolute;
      right: 8px; top: 50%; transform: translateY(-50%);
      width: 34px; height: 34px; border-radius: 8px;
      border: 1px solid #e5edf8;
      background: #f7faff;
      display: grid; place-items: center;
      cursor: pointer; font-size: 16px;
    }
    .btn {
      width: 100%;
      height: 44px;
      border: none;
      border-radius: 10px;
      background: #1b6e2a;
      color: #fff; font-weight: 600;
      cursor: pointer; transition: 0.15s;
      margin-top: 6px;
    }
    .btn:hover { background: #145321; }
    .muted {
      text-align: center; margin-top: 10px; font-size: 13px; color: #6d7485;
    }
    .muted a { color: #1c46a0; text-decoration: none; }
    .muted a:hover { text-decoration: underline; }
    footer {
      text-align: center; margin-top: 14px; font-size: 12px; color: #8b93a7;
    }
  </style>

  <!-- Penting: muat main.js dengan defer + cache-buster agar selalu versi terbaru -->
  <script defer src="main.js?v=loginfix_2025_11_10_1"></script>
</head>
<body>
  <div class="card">
    <div class="brand">
      <span class="dot">üåÄ</span>
      <span>PT Anisa Jaya Utama</span>
    </div>
    <h2>Login Pengguna</h2>

    <div class="field">
      <input id="username" type="text" placeholder="Username" autocomplete="username" />
    </div>

    <div class="field">
      <input id="password" type="password" placeholder="Password" autocomplete="current-password" />
      <button id="togglePass" class="toggle" type="button" title="Lihat / sembunyikan password">üëÅÔ∏è</button>
    </div>

    <button id="btnLogin" class="btn" type="button">Masuk</button>

    <p class="muted">Belum punya akun? <a href="register.html">Daftar di sini</a></p>
    <footer>¬© PT Anisa Jaya Utama</footer>
  </div>

  <script>
    // Toggle password aman & simpel
    document.getElementById("togglePass").addEventListener("click", function () {
      const p = document.getElementById("password");
      const show = p.type === "password";
      p.type = show ? "text" : "password";
      this.textContent = show ? "üôà" : "üëÅÔ∏è";
    });

    // Panggil login() dari main.js (sudah dimuat via defer)
    document.getElementById("btnLogin").addEventListener("click", function () {
      if (typeof login === "function") {
        login(); // akan redirect ke dashboard.html jika sukses (sesuai main.js kamu)
      } else {
        // fallback kalau ekstrem caching: paksa reload satu kali
        location.href = "login.html?v=" + Date.now();
      }
    });

    // Enter to submit
    ["username","password"].forEach(id => {
      document.getElementById(id).addEventListener("keydown", e => {
        if (e.key === "Enter") document.getElementById("btnLogin").click();
      });
    });
  </script>
</body>
</html>
